<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MathLab Pro</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 height=%2232%22 width=%2232%22><text y=%2224%22 font-size=%2224%22>üìê</text></svg>">
  <script src="https://www.geogebra.org/apps/deployggb.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/particles.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.146.0/build/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.146.0/examples/js/controls/OrbitControls.min.js"></script>
  <style>
    * { box-sizing: border-box; }
    :root{ --accent:#06b6d4; --accent-2:#22c1c3; --card: rgba(255,255,255,0.08); }
    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(-45deg, #1e3a8a, #2563eb, #1d4ed8, #3b82f6);
      background-size: 400% 400%;
      animation: gradientBG 15s ease infinite;
      color: #e6eef6;
      min-height: 100vh;
      overflow-x: hidden;
    }
    @keyframes gradientBG {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    #particles-js { position: fixed; inset: 0; z-index: 0; }
    header {
      position: sticky; top: 0; z-index: 3;
      background: rgba(30, 58, 138, 0.9);
      backdrop-filter: blur(6px);
      color: #fff; padding: 16px; text-align: center;
      font-size: 1.9rem; font-weight: 700;
      box-shadow: 0 2px 14px rgba(0,0,0,0.25);
    }
    #toggleBtn{
      position: fixed; top: 14px; left: 14px; z-index: 4;
      background: var(--accent); color: #032; border: none;
      padding: 10px 14px; border-radius: 8px; cursor: pointer; font-size: 1.1rem;
      box-shadow: 0 8px 20px rgba(0,0,0,0.25);
    }
    #sidebar{
      height: 100vh; width: 260px; position: fixed; top: 0; left: -260px; z-index: 3;
      background: rgba(8,17,31,0.65); backdrop-filter: blur(8px);
      padding-top: 72px; transition: left .3s ease; box-shadow: 6px 0 18px rgba(0,0,0,0.35);
    }
    #sidebar a{
      display:block; margin: 10px 14px; padding: 12px 14px; text-decoration: none;
      color:#e8f0ff; font-size:1.05rem; border-radius:10px; text-align:left;
      background: transparent; border:1px solid rgba(255,255,255,0.12);
    }
    #sidebar a:hover{ background: rgba(255,255,255,0.12); color:#fff; }
    #content{
      position: relative; z-index: 1;
      transition: margin-left .3s ease; padding: 24px; min-height: calc(100vh - 64px);
    }
    .card{
      background: rgba(255,255,255,0.12);
      border: 1px solid rgba(255,255,255,0.18);
      border-radius: 16px; padding: 20px; margin: 16px auto; max-width: 1000px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.25);
    }
    .controls-row{ display:flex; flex-wrap:wrap; gap:10px; align-items:center; justify-content:center; }
    .controls-row input{ width:110px; padding:8px 10px; font-size:1rem; border-radius:8px; border:1px solid rgba(255,255,255,0.25); background: rgba(0,0,0,0.25); color:#fff; }
    .controls-row button{
      background: var(--accent-2); color:#032; border:none; padding:10px 14px; border-radius:10px; cursor:pointer; font-weight:700;
      box-shadow: 0 6px 16px rgba(0,0,0,0.25);
    }
    .controls-row button:hover{ filter: brightness(1.08); }
    .output{ margin-top: 18px; background: rgba(0,0,0,0.25); border-left: 4px solid #0284c7; padding:14px; border-radius:10px; word-wrap: break-word; }
    #ggb-element{ width:100%; height: 640px; border-radius: 12px; background:#fff; }
    #shapeContainer{ height: 520px; border-radius: 12px; overflow: hidden; }
    @media (max-width: 820px){
      #sidebar{ width: 220px; left: -220px; }
      #content{ padding: 16px; }
      .controls-row input{ width: 90px; }
      #ggb-element{ height: 520px; }
    }
  </style>
</head>
<body>
  <div id="particles-js"></div>
  <button id="toggleBtn">‚ò∞ Menu</button>
  <div id="sidebar">
    <a href="#" data-page="home">üè† Home</a>
    <a href="#" data-page="series">üî¢ Series Generator</a>
    <a href="#" data-page="parabola">üìà Graph Plotter</a>
    <a href="#" data-page="shapes">üßä 3D Shapes</a>
  </div>
  <header>MathLab Pro</header>
  <main id="content"></main>
  <script>
    const sidebar = document.getElementById('sidebar');
    const toggleBtn = document.getElementById('toggleBtn');
    const content = document.getElementById('content');
    toggleBtn.onclick = () => {
      const open = sidebar.style.left === '0px';
      sidebar.style.left = open ? `-${sidebar.offsetWidth}px` : '0px';
      content.style.marginLeft = open ? '0' : `${sidebar.offsetWidth}px`;
    };
    const randomFacts = [
      "Zero is the only number that cannot be represented in Roman numerals.",
      "The Fibonacci sequence appears in nature, like sunflower seeds and pinecones.",
      "A circle has infinite lines of symmetry.",
      "The word 'mathematics' comes from the Greek word 'mathema', meaning knowledge.",
      "Euler‚Äôs identity e^(iœÄ) + 1 = 0 is often called the most beautiful equation.",
      "There are infinitely many prime numbers.",
      "The golden ratio is approximately 1.618, and it appears in art, nature, and architecture.",
      "Light travels about 299,792 kilometers per second.",
      "Pi (œÄ) is an irrational number, meaning it never ends or repeats.",
      "Absolute zero is ‚àí273.15¬∞C, the lowest possible temperature."
    ];
    function loadPage(page){
      if(page==='home'){
        content.innerHTML = `
          <section class="card">
            <h2>Welcome üëã</h2>
            <p style="font-size:1.1rem;line-height:1.55">
              Use the menu to explore: a powerful <b>Series Generator</b>, a GeoGebra-based <b>Graph Plotter</b>,
              and a <b>3D Shapes</b> viewer powered by Three.js.
            </p>
            <div class="output" id="factBox" style="margin-top:16px; max-height:400px; overflow-y:auto"></div>
          </section>`;
        const factBox = document.getElementById('factBox');
        factBox.innerHTML = randomFacts.map((fact, i)=>`
          <p style="margin:8px 0; padding:10px; background:rgba(255,255,255,0.05); border-radius:8px">
            <b>üí° Fact ${i+1}:</b> ${fact}
          </p>
        `).join("");
      }
      if(page==='series'){
        content.innerHTML = `
          <section class="card">
            <h3>Math Series Generator</h3>
            <div class="controls-row" style="margin-top:10px">
              <label>First Term (a): <input type="number" id="firstTerm" value="1"></label>
              <label>Diff/Ratio (d or r): <input type="number" id="common" value="1"></label>
              <label>Terms (n): <input type="number" id="terms" value="10"></label>
            </div>
            <div class="controls-row" style="margin-top:12px">
              <button onclick="generateAP()">Generate AP</button>
              <button onclick="generateGP()">Generate GP</button>
              <button onclick="generateHP()">Generate HP</button>
              <button onclick="generateFibonacci()">Fibonacci</button>
            </div>
            <div class="output" id="output"></div>
          </section>`;
      }
      if(page==='parabola'){
        content.innerHTML = `
          <section class="card">
            <h3>Interactive Graphing Calculator</h3>
            <div id="ggb-element"></div>
          </section>`;
        setTimeout(() => {
          const params = {
            appName: 'graphing',
            width: document.getElementById('ggb-element').clientWidth,
            height: document.getElementById('ggb-element').clientHeight,
            showToolBar: false,
            showAlgebraInput: true,
            showMenuBar: false,
            enableShiftDragZoom: true,
            enableRightClick: false
          };
          const applet = new GGBApplet(params, true);
          applet.inject('ggb-element');
        }, 0);
      }
      if(page==='shapes'){
        content.innerHTML = `
          <section class="card">
            <h3>3D Shapes Viewer</h3>
            <div style="margin: 8px 0 12px">
              <label for="shapeSelect">Choose shape: </label>
              <select id="shapeSelect">
                <option value="cube">Cube</option>
                <option value="sphere">Sphere</option>
                <option value="cone">Cone</option>
              </select>
            </div>
            <div id="shapeContainer"></div>
          </section>`;
        setTimeout(shapesInit, 0);
      }
    }
    document.addEventListener('click', (e) => {
      const a = e.target.closest('#sidebar a');
      if(!a) return;
      e.preventDefault();
      loadPage(a.dataset.page);
      if (window.innerWidth < 900) {
        sidebar.style.left = `-${sidebar.offsetWidth}px`;
        content.style.marginLeft = '0';
      }
    });
    loadPage('home');
    function getInputValues(){
      const a = parseFloat(document.getElementById('firstTerm')?.value || '1');
      const d = parseFloat(document.getElementById('common')?.value || '1');
      const n = parseInt(document.getElementById('terms')?.value || '10');
      return { a, d, n };
    }
    function displaySeries(series, title){
      const out = document.getElementById('output');
      if(out){ out.innerHTML = `<h4 style="margin:0 0 6px">${title}</h4><div>${series.join(', ')}</div>`; }
    }
    function generateAP(){ const {a,d,n} = getInputValues(); const s=[]; for(let i=0;i<n;i++){ s.push(a + i*d); } displaySeries(s,'Arithmetic Progression (AP)'); }
    function generateGP(){ const {a,d,n} = getInputValues(); const s=[]; for(let i=0;i<n;i++){ s.push(a * Math.pow(d,i)); } displaySeries(s,'Geometric Progression (GP)'); }
    function generateHP(){ const {a,d,n} = getInputValues(); const s=[]; for(let i=0;i<n;i++){ const ap=a+i*d; s.push((1/ap).toFixed(4)); } displaySeries(s,'Harmonic Progression (HP)'); }
    function generateFibonacci(){ const {n} = getInputValues(); const s=[]; let a=0,b=1; for(let i=0;i<n;i++){ s.push(a); [a,b]=[b,a+b]; } displaySeries(s,'Fibonacci Series'); }
    function shapesInit(){
      const container = document.getElementById('shapeContainer');
      container.innerHTML = '';
      const scene = new THREE.Scene();
      scene.background = new THREE.Color(0x0f1724);
      const camera = new THREE.PerspectiveCamera(70, container.clientWidth / container.clientHeight, 0.1, 1000);
      const renderer = new THREE.WebGLRenderer({ antialias:true });
      renderer.setSize(container.clientWidth, container.clientHeight);
      container.appendChild(renderer.domElement);
      const controls = new THREE.OrbitControls(camera, renderer.domElement);
      camera.position.set(4, 3, 6);
      controls.update();
      const ambient = new THREE.AmbientLight(0xffffff, 0.6); scene.add(ambient);
      const dir = new THREE.DirectionalLight(0xffffff, 1.0); dir.position.set(5,5,5); scene.add(dir);
      let mesh;
      function addShape(type){
        if(mesh) scene.remove(mesh);
        let geometry;
        if(type==='cube') geometry = new THREE.BoxGeometry(3.6, 3.6, 3.6);
        if(type==='sphere') geometry = new THREE.SphereGeometry(2.8, 48, 32);
        if(type==='cone') geometry = new THREE.ConeGeometry(2.6, 5.2, 64);
        const material = new THREE.MeshStandardMaterial({ color: 0x22c1c3, metalness:0.3, roughness:0.35 });
        mesh = new THREE.Mesh(geometry, material);
        scene.add(mesh);
      }
      addShape('cube');
      document.getElementById('shapeSelect').onchange = (e)=> addShape(e.target.value);
      function onResize(){
        const w = container.clientWidth, h = container.clientHeight;
        camera.aspect = w/h; camera.updateProjectionMatrix(); renderer.setSize(w,h);
      }
      window.addEventListener('resize', onResize);
      (function animate(){ requestAnimationFrame(animate); if(mesh){ mesh.rotation.y += 0.007; } renderer.render(scene,camera); })();
    }
    particlesJS('particles-js', {
      particles: {
        number: { value: 70, density: { enable: true, value_area: 800 } },
        color: { value: '#ffffff' },
        shape: { type: 'circle' },
        opacity: { value: 0.5 },
        size: { value: 3 },
        line_linked: { enable: true, distance: 150, color: '#ffffff', opacity: 0.4, width: 1 },
        move: { enable: true, speed: 3, direction: 'none', random: false, straight: false, out_mode: 'out' }
      },
      interactivity: {
        detect_on: 'canvas',
        events: { onhover: { enable: true, mode: 'grab' }, onclick: { enable: true, mode: 'push' } },
        modes: { grab: { distance: 200, line_linked: { opacity: 0.7 } }, push: { particles_nb: 4 } }
      },
      retina_detect: true
    });
  </script>
</body>
</html>